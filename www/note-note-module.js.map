{"version":3,"sources":["webpack:///./src/app/note/note.module.ts","webpack:///./src/app/note/note.page.html","webpack:///./src/app/note/note.page.scss","webpack:///./src/app/note/note.page.ts"],"names":[],"mappings":"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","file":"note-note-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NotePage } from './note.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NotePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [NotePage]\n})\nexport class NotePageModule {}\n","module.exports = \"<!--<ion-header>-->\\n<!--<ion-toolbar>-->\\n<!--<ion-title>便签墙</ion-title>-->\\n<!--</ion-toolbar>-->\\n<!--</ion-header>-->\\n\\n<ion-content>\\n    <div style=\\\"position: fixed;top: 0;left: 0;z-index: 1\\\">\\n        <img style=\\\"width: 100vw;height: 100vh;object-fit: cover;\\\" src=\\\"assets/note_ground.png\\\">\\n    </div>\\n    <div style=\\\"position: fixed;top: 0;left: 0;width: 100vw;height: 100vh;z-index: 99;\\\" (click)=\\\"testPoint($event)\\\">\\n\\n    </div>\\n\\n    <div *ngFor=\\\"let item of points\\\">\\n        <div style=\\\"position: absolute;z-index: 100\\\"\\n             [ngStyle]=\\\"{\\n      left: item.offsetX,\\n      top: item.offsetY\\n      }\\\" (click)=\\\"showDetal(item)\\\">\\n            <ion-card>\\n                <div style=\\\"margin: 1rem\\\">\\n                    {{item['content']}}\\n                </div>\\n            </ion-card>\\n\\n        </div>\\n    </div>\\n\\n    <div style=\\\"width: 100vw; height: 20vh; position: fixed;left: 0;z-index: 101;\\\" [ngStyle]=\\\"{\\n    top: textPosition }\\\">\\n        <ion-card>\\n            <div style=\\\"background-color: wheat;\\\">\\n                <div>\\n                    <ion-textarea #inputRef [required]=\\\"true\\\"  rows=\\\"8\\\" cols=\\\"20\\\" [placeholder]=\\\"'输入便签内容吧'\\\" [(ngModel)]=\\\"context\\\"></ion-textarea>\\n                </div>\\n                <div style=\\\"display: flex;justify-content: flex-end\\\">\\n                    <ion-button shape=\\\"round\\\" (click)=\\\"sendNote()\\\">发布</ion-button>\\n                </div>\\n            </div>\\n        </ion-card>\\n    </div>\\n\\n    <!--<div *ngIf=\\\"edit\\\" style=\\\"position: absolute; top: 20vh;left: 40vw\\\">-->\\n    <!--<ion-textarea #inputRef [placeholder]=\\\"'添加便签吧'\\\" [ngModel]=\\\"context\\\"></ion-textarea>-->\\n    <!--</div>-->\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL25vdGUvbm90ZS5wYWdlLnNjc3MifQ== */\"","import {Component, OnInit, ViewChild} from '@angular/core';\nimport {EditBackgoundPage} from '../edit-backgound/edit-backgound.page';\nimport {ModalController, ToastController} from '@ionic/angular';\nimport {NoteEditorPage} from '../note-editor/note-editor.page';\nimport {HttpClient} from '@angular/common/http';\n\n@Component({\n  selector: 'app-note',\n  templateUrl: './note.page.html',\n  styleUrls: ['./note.page.scss'],\n})\nexport class NotePage implements OnInit {\n\n    textPosition = '-40vh';\n    edit = false;\n    curOffsetX = 0;\n    curOffsetY = 0;\n\n    context = '';\n\n    @ViewChild('inputRef')\n    public inputRef;\n\n    points = [];\n\n  constructor(private modalController: ModalController,\n              private http: HttpClient, public toastController: ToastController) { }\n\n  ngOnInit() {\n      this.loadData();\n  }\n  loadData() {\n\n      this.http.get(ROOT_URL + 'note/list?cookie=' + localStorage.getItem('anshi_cookie')).subscribe(res => {\n          console.log(res);\n          if (res['code'] === 200) {\n              res['data']['data'].forEach(item => {\n                  console.log(item);\n                  this.points.push({\n                      id: item['id'],\n                      content: item['content'],\n                      offsetX: item['offset_x'] + 'px',\n                      offsetY: item['offset_y'] + 'px'\n                  });\n              });\n          }\n      }, (err) => {\n          console.log(err);\n          this.presentToast(err['error']['msg']).then(r => {\n              console.log(r);\n          });\n      });\n  }\n\n    testPoint(e) {\n    console.log(e);\n    this.curOffsetX = e.offsetX;\n    this.curOffsetY = e.offsetY;\n    this.textPosition = '5vh';\n        this.inputRef.setFocus().then( res => {\n            console.log('input focus');\n        });\n\n    //\n    // this.points.push({\n    //     content: 'hahhah',\n    //     offsetX: e.offsetX + 'px',\n    //     offsetY: e.offsetY + 'px'\n    // });\n    }\n\n    async presentEditorModal(e) {\n        const modal = await this.modalController.create({\n            component: NoteEditorPage,\n            componentProps: e,\n        });\n        await modal.present();\n        const { data } = await modal.onDidDismiss();\n        console.log(data);\n        // return await modal.present();\n    }\n\n    sendNote() {\n        let params = {\n            content: this.context,\n            offset_x: this.curOffsetX,\n            offset_y: this.curOffsetY,\n            cookie: localStorage.getItem('anshi_cookie')\n        }\n        console.log(params);\n        this.http.post(ROOT_URL + 'note/add', params).subscribe(res => {\n            console.log(res);\n            if (res['code'] === 200) {\n                this.context = '';\n                this.textPosition = '-40vh';\n                this.points = [];\n                this.loadData();\n\n                // this.loadComment();\n            }\n        }, (err) => {\n            console.log(err);\n            this.presentToast(err['error']['msg']).then(r => {\n                console.log(r);\n            });\n        });\n    }\n\n\n    async presentToast(msg) {\n        const toast = await this.toastController.create({\n            message: msg,\n            duration: 2000\n        });\n        toast.present();\n    }\n\n    showDetal(e) {\n      console.log(e);\n      this.presentEditorModal(e).then(res => {\n          this.points = [];\n          this.loadData();\n      });\n    }\n}\n"],"sourceRoot":""}