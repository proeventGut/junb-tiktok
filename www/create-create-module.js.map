{"version":3,"sources":["webpack:///./src/app/create/create.module.ts","webpack:///./src/app/create/create.page.html","webpack:///./src/app/create/create.page.scss","webpack:///./src/app/create/create.page.ts"],"names":[],"mappings":"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","file":"create-create-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\nimport { CreatePage } from './create.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CreatePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [CreatePage]\n})\nexport class CreatePageModule {}\n","module.exports = \"<ion-header>\\n    <ion-toolbar mode=\\\"ios\\\" color=\\\"header\\\">\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button [text]=\\\"' '\\\"></ion-back-button>\\n        </ion-buttons>\\n        <ion-title>视频发布</ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n    <div class=\\\"content-bg\\\">\\n        <img src=\\\"./assets/img/feeds-bg.jpg\\\" alt=\\\"\\\">\\n    </div>\\n\\n    <div style=\\\"text-align: center; margin-top: 1rem;margin-bottom: 1rem;\\\">\\n\\n        <ion-item color=\\\"air\\\" class=\\\"title\\\">\\n            <ion-label color=\\\"light\\\" slot=\\\"start\\\">标题</ion-label>\\n            <ion-textarea [(ngModel)]=\\\"title\\\" rows=\\\"6\\\" cols=\\\"20\\\" placeholder=\\\"给您的视频添加一个有趣的标题吧！\\\"></ion-textarea>\\n        </ion-item>\\n\\n        <!--<ion-item>-->\\n            <!--<ion-label>預覽圖</ion-label>-->\\n        <!--预览图 给您的视频添加一个有趣的标题吧！-->\\n            <!--<img style=\\\"object-fit: cover;width: 8rem;height: 10rem\\\" src=\\\"assets/shapes.svg\\\">-->\\n        <!--</ion-item>-->\\n\\n        <div style=\\\"display: flex\\\">\\n            <!--<button ion-button (click)=\\\"openCamera()\\\">打开摄像头</button>-->\\n\\n            <!--<button ion-button (click)=\\\"recordVideo()\\\">录像</button>-->\\n\\n\\n\\n        </div>\\n\\n        <!--<ion-item class=\\\"title\\\" color=\\\"air\\\">-->\\n            <!--<ion-label color=\\\"light\\\">封面</ion-label>-->\\n            <!--<img *ngIf=\\\"!imageSource\\\" style=\\\"object-fit: cover;width: 8rem;height: 10rem\\\" src=\\\"assets/shapes.svg\\\">-->\\n            <!--<div *ngIf=\\\"imageSource\\\">-->\\n                <!--<img style=\\\"object-fit: cover;width: 8rem;height: 10rem\\\"-->\\n                     <!--src=\\\"{{'http://tiktok.tiantianquan.xyz/storage' + imageSource}}\\\" alt=\\\"\\\">-->\\n            <!--</div>-->\\n        <!--</ion-item>-->\\n\\n        <div class=\\\"video\\\">\\n            <ion-button *ngIf=\\\"!imageSource\\\" (click)=\\\"selectVideo()\\\">\\n                选择视频\\n                <ion-icon slot=\\\"end\\\" name=\\\"add-circle-outline\\\"></ion-icon>\\n            </ion-button>\\n            <!--<div *ngIf=\\\"!imageSource\\\" class=\\\"check\\\">-->\\n                <!--<img src=\\\"assets/shapes.svg\\\" alt=\\\"\\\">-->\\n                <!--<span>封面</span>-->\\n            <!--</div>-->\\n            <div *ngIf=\\\"imageSource\\\" class=\\\"check\\\">\\n                <img src=\\\"{{'http://tiktok.tiantianquan.xyz/storage' + imageSource}}\\\" alt=\\\"\\\">\\n                <span>封面</span>\\n            </div>\\n        </div>\\n\\n    </div>\\n\\n    <div *ngIf=\\\"upLoading\\\">\\n        <ion-spinner name=\\\"crescent\\\"></ion-spinner>\\n    </div>\\n\\n    <!--<div>-->\\n        <!--<ion-progress-bar value=\\\"{{progresss}}\\\"></ion-progress-bar>-->\\n    <!--</div>-->\\n\\n\\n\\n    <div class=\\\"release\\\" (click)=\\\"publish()\\\">发布</div>\\n\\n\\n</ion-content>\\n\\n\\n<!--ionSlideTransitionEnd\\tEmitted when the slide transition has ended.-->\\n<!--ionSlideTransitionStart-->\\n\"","module.exports = \"ion-header {\\n  background: linear-gradient(to right, #0B0F19, #172034);\\n  color: white; }\\n\\n.content-bg {\\n  position: fixed;\\n  width: 100%;\\n  height: 100%;\\n  top: 0;\\n  z-index: 0; }\\n\\n.content-bg img {\\n    width: 100%;\\n    height: 100%; }\\n\\n.release {\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  bottom: 20px;\\n  width: 90%;\\n  height: 2.5rem;\\n  border-radius: 2.5rem;\\n  background: #4F98C7;\\n  color: white;\\n  text-align: center;\\n  line-height: 2.5rem;\\n  margin: 3rem auto 1rem; }\\n\\n.title {\\n  margin: 0 20px; }\\n\\nion-item {\\n  --color: #121E2A;\\n  --border-color: #121E2A;\\n  --border-width: 0 0 .55px;\\n  --border-style: solid;\\n  --padding-start: 0;\\n  --padding-end: 0; }\\n\\nion-textarea {\\n  --color: white;\\n  --padding-start: 0;\\n  --padding-end: 0;\\n  --padding-top: 2px;\\n  --padding-bottom: 0; }\\n\\n.video {\\n  margin: 10px 20px;\\n  position: relative;\\n  display: flex; }\\n\\n.video .check {\\n    position: relative;\\n    width: 128px;\\n    height: 160px; }\\n\\n.video .check img {\\n      -o-object-fit: cover;\\n         object-fit: cover;\\n      width: 128px;\\n      height: 160px;\\n      border-radius: 10px; }\\n\\n.video .check span {\\n      position: absolute;\\n      bottom: 10px;\\n      left: 10px;\\n      color: black;\\n      background: white;\\n      border-radius: 40px;\\n      width: 60px;\\n      height: 30px;\\n      line-height: 30px;\\n      font-size: 12px; }\\n\\nion-button {\\n  --background: #23375d;\\n  --border-radius: 5px;\\n  --color: white; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy96aGFuZ2p1bmJhby9wcm9qZWN0L3Rpa3Rvay90aWt0b2stbWFzdGVyL2FwcC9wYXRjaC9zcmMvYXBwL2NyZWF0ZS9jcmVhdGUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsdURBQXVEO0VBQ3ZELFlBQVksRUFBQTs7QUFFZDtFQUNFLGVBQWU7RUFDZixXQUFXO0VBQ1gsWUFBWTtFQUNaLE1BQU07RUFLTixVQUFVLEVBQUE7O0FBVFo7SUFNSSxXQUFXO0lBQ1gsWUFBWSxFQUFBOztBQUtoQjtFQUNFLGtCQUFrQjtFQUNsQixPQUFPO0VBQUUsUUFBUTtFQUNqQixZQUFZO0VBQ1osVUFBVTtFQUNWLGNBQWM7RUFDZCxxQkFBcUI7RUFDckIsbUJBQW1CO0VBQ25CLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsbUJBQW1CO0VBQ25CLHNCQUFzQixFQUFBOztBQUV4QjtFQUVFLGNBQWMsRUFBQTs7QUFFaEI7RUFDRSxnQkFBUTtFQUNSLHVCQUFlO0VBQ2YseUJBQWU7RUFDZixxQkFBZTtFQUNmLGtCQUFnQjtFQUNoQixnQkFBYyxFQUFBOztBQUVoQjtFQUNFLGNBQVE7RUFDUixrQkFBZ0I7RUFDaEIsZ0JBQWM7RUFDZCxrQkFBYztFQUNkLG1CQUFpQixFQUFBOztBQUVuQjtFQUNFLGlCQUFpQjtFQUNqQixrQkFBa0I7RUFDbEIsYUFBYSxFQUFBOztBQUhmO0lBS0ksa0JBQWtCO0lBQ2xCLFlBQVk7SUFDWixhQUFhLEVBQUE7O0FBUGpCO01BU00sb0JBQWlCO1NBQWpCLGlCQUFpQjtNQUNqQixZQUFZO01BQ1osYUFBYTtNQUNiLG1CQUFtQixFQUFBOztBQVp6QjtNQWVNLGtCQUFrQjtNQUNsQixZQUFZO01BQ1osVUFBVTtNQUNWLFlBQVk7TUFDWixpQkFBaUI7TUFDakIsbUJBQW1CO01BQ25CLFdBQVc7TUFDWCxZQUFZO01BQ1osaUJBQWlCO01BQ2pCLGVBQWUsRUFBQTs7QUFJckI7RUFDRSxxQkFBYTtFQUNiLG9CQUFnQjtFQUNoQixjQUFRLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9jcmVhdGUvY3JlYXRlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1oZWFkZXIge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICMwQjBGMTksICMxNzIwMzQpO1xuICBjb2xvcjogd2hpdGU7XG59XG4uY29udGVudC1iZyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgdG9wOiAwO1xuICBpbWcge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgfVxuICB6LWluZGV4OiAwO1xuXG59XG4ucmVsZWFzZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMDsgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMjBweDtcbiAgd2lkdGg6IDkwJTtcbiAgaGVpZ2h0OiAyLjVyZW07XG4gIGJvcmRlci1yYWRpdXM6IDIuNXJlbTtcbiAgYmFja2dyb3VuZDogIzRGOThDNztcbiAgY29sb3I6IHdoaXRlO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGxpbmUtaGVpZ2h0OiAyLjVyZW07XG4gIG1hcmdpbjogM3JlbSBhdXRvIDFyZW07XG59XG4udGl0bGUge1xuICAvL2NvbG9yOiB3aGl0ZTtcbiAgbWFyZ2luOiAwIDIwcHg7XG59XG5pb24taXRlbSB7XG4gIC0tY29sb3I6ICMxMjFFMkE7XG4gIC0tYm9yZGVyLWNvbG9yOiAjMTIxRTJBO1xuICAtLWJvcmRlci13aWR0aDogMCAwIC41NXB4O1xuICAtLWJvcmRlci1zdHlsZTogc29saWQ7XG4gIC0tcGFkZGluZy1zdGFydDogMDtcbiAgLS1wYWRkaW5nLWVuZDogMDtcbn1cbmlvbi10ZXh0YXJlYSB7XG4gIC0tY29sb3I6IHdoaXRlO1xuICAtLXBhZGRpbmctc3RhcnQ6IDA7XG4gIC0tcGFkZGluZy1lbmQ6IDA7XG4gIC0tcGFkZGluZy10b3A6IDJweDtcbiAgLS1wYWRkaW5nLWJvdHRvbTogMDtcbn1cbi52aWRlbyB7XG4gIG1hcmdpbjogMTBweCAyMHB4O1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIC5jaGVjayB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHdpZHRoOiAxMjhweDtcbiAgICBoZWlnaHQ6IDE2MHB4O1xuICAgIGltZyB7XG4gICAgICBvYmplY3QtZml0OiBjb3ZlcjtcbiAgICAgIHdpZHRoOiAxMjhweDtcbiAgICAgIGhlaWdodDogMTYwcHg7XG4gICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICAgIH1cbiAgICBzcGFuIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGJvdHRvbTogMTBweDtcbiAgICAgIGxlZnQ6IDEwcHg7XG4gICAgICBjb2xvcjogYmxhY2s7XG4gICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDQwcHg7XG4gICAgICB3aWR0aDogNjBweDtcbiAgICAgIGhlaWdodDogMzBweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAzMHB4O1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgIH1cbiAgfVxufVxuaW9uLWJ1dHRvbiB7XG4gIC0tYmFja2dyb3VuZDogIzIzMzc1ZDtcbiAgLS1ib3JkZXItcmFkaXVzOiA1cHg7XG4gIC0tY29sb3I6IHdoaXRlO1xufVxuIl19 */\"","import {Component, ElementRef, OnInit, ViewChild} from '@angular/core';\nimport {Camera, CameraOptions} from '@ionic-native/camera/ngx';\nimport { ImagePicker } from '@ionic-native/image-picker/ngx';\nimport { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer/ngx';\nimport { File } from '@ionic-native/file/ngx';\nimport {FilePath} from '@ionic-native/file-path/ngx';\nimport {HttpClient} from '@angular/common/http';\nimport {LoadingController} from '@ionic/angular';\nimport { VideoEditor } from '@ionic-native/video-editor/ngx';\nimport {Router} from '@angular/router';\n\n@Component({\n  selector: 'app-create',\n  templateUrl: './create.page.html',\n  styleUrls: ['./create.page.scss'],\n})\nexport class CreatePage implements OnInit {\n    items: any[] = [];\n  public path;\n  public videoSource;\n  public imageSource;\n  public title;\n  public progresss = 0;\n  public upLoading = false;\n  public testSrc;\n\n  constructor( private camera: Camera, private imagePicker: ImagePicker, private transfer: FileTransfer,\n               private file: File,\n               private filePath: FilePath,\n               private http: HttpClient,\n               private loadingCtrl: LoadingController,\n               private videoEditor: VideoEditor,\n               private router: Router) {\n      for (let i = 0; i < 1000; i++) {\n          this.items.push('test' + 1);\n      }\n  }\n\n  ngOnInit() {\n  }\n\n    /**\n     * 打开摄像头\n     */\n    openCamera() {\n        const options: CameraOptions = {\n            // quality: 100,\n            // destinationType: this.camera.DestinationType.FILE_URI,\n            // encodingType: this.camera.EncodingType.JPEG,\n            // mediaType: this.camera.MediaType.PICTURE\n            quality: 90,                                                   // 相片质量 0 -100\n            destinationType: this.camera.DestinationType.DATA_URL,        // DATA_URL 是 base64   FILE_URL 是文件路径\n            // encodingType: this.camera.EncodingType.JPEG,\n            mediaType: this.camera.MediaType.VIDEO,  // VIDEO PICTURE\n            saveToPhotoAlbum: true,                                       // 是否保存到相册\n            // // sourceType: this.camera.PictureSourceType.CAMERA ,         //是打开相机拍照还是打开相册选择  PHOTOLIBRARY : 相册选择, CAMERA : 拍照,\n        };\n\n        console.log('test camera');\n\n        this.camera.getPicture(options).then((imageData) => {\n            // console.log(\"got file: \" + imageData);\n\n            // alert(imageData)\n\n            // If it's base64:\n            let base64Image = 'data:image/jpeg;base64,' + imageData;\n            this.path = base64Image;\n\n        }, (err) => {\n\n          console.log(err);\n            // Handle error\n        });\n    }\n\n    recordVideo() {\n        this.imagePicker.getPictures({maximumImagesCount: 3}).then((results) => {\n            for (var i = 0; i < results.length; i++) {\n                console.log('Image URI: ' + results[i]);\n            }\n        }, (err) => { });\n    }\n\n    selectVideo() {\n        this.camera.getPicture({destinationType: this.camera.DestinationType.DATA_URL, mediaType:\n            this.camera.MediaType.VIDEO, sourceType:\n            this.camera.PictureSourceType.PHOTOLIBRARY }).then(res => {\n            console.log(res);\n            this.upload(res);\n\n            // this.videoEditor.transcodeVideo({\n            //     fileUri: 'file://' + res,\n            //     outputFileName: 'output.mp4',\n            //     outputFileType: this.videoEditor.OutputFileType.MPEG4\n            // })\n            //     .then((fileUri: string) => console.log('video transcode success', fileUri))\n            //     .catch((error: any) => console.log('video transcode error', error));\n\n            this.videoEditor.createThumbnail({\n                fileUri: 'file://' + res,\n                outputFileName: 'temp'\n            })\n                .then((fileUri: string) => {\n                    console.log('video createThumbnail success', fileUri)\n                    const fileTransfer: FileTransferObject = this.transfer.create();\n                    let options: FileUploadOptions = {\n                        fileKey: 'file',\n                        fileName: 'test.jpg',\n                        mimeType: 'image/jpeg',\n                        headers: {}\n                    };\n\n                    fileTransfer.upload(fileUri , ROOT_URL + '/image/upload', options)\n                        .then((data) => {\n                            console.log(data);\n                            if(data['responseCode'] === 200){\n                                console.log(data['response']);\n                                let res = JSON.parse(data['response']);\n                                console.log(res);\n                                if (res['code'] === 200) {\n                                    this.imageSource = res['data']['img'][0]['url'];\n                                    console.log(this.imageSource);\n                                }\n                            }\n                            // success\n                        }, (err) => {\n                            console.log(err);\n                            console.log(err.body);\n                            // error\n                        });\n                })\n                .catch((error: any) => console.log('video createThumbnail error', error));\n\n        });\n    }\n    upload(path) {\n        const fileTransfer: FileTransferObject = this.transfer.create();\n\n        console.log(path)\n\n        let options: FileUploadOptions = {\n            fileKey: 'file',\n            fileName: 'test.mp4',\n            mimeType: 'video/mp4',\n            headers: {}\n        };\n\n        let now = 0;\n\n        fileTransfer.onProgress(progess  => {\n            if (progess.lengthComputable) {\n                now = progess.total / progess.loaded * 100;\n            }\n        });\n        this.upLoading = true;\n\n        fileTransfer.upload(path , ROOT_URL + '/video/upload', options)\n            .then((data) => {\n                console.log(data);\n                if(data['responseCode'] === 200){\n                    console.log(data['response']);\n                    let res = JSON.parse(data['response']);\n                    console.log(res);\n                    if (res['code'] === 200) {\n                        this.videoSource = res['data']['video'][0]['url'];\n                        this.upLoading = false;\n                        console.log(this.videoSource);\n                    }\n                }\n                // success\n            }, (err) => {\n                console.log(err);\n                console.log(err.body);\n                // error\n            });\n\n        let timer = setInterval(() => {\n            // loading.setContent('上传中 ' + Math.floor(now) + '%');\n            this.progresss = Math.floor(now);\n            console.log(now);\n            if (now >= 99) {\n                clearInterval(timer);\n            }\n        }, 500);\n    }\n\n    publish() {\n        let params = {\n            title: this.title,\n            video_url: this.videoSource,\n            poster: this.imageSource,\n            cookie: localStorage.getItem('anshi_cookie')\n        };\n        console.log(params);\n        this.http.post(ROOT_URL + 'post', params).subscribe(res => {\n            console.log(res);\n            if (res['code'] === 200) {\n                this.router.navigate(['/home']);\n            }\n        });\n    }\n\n    tcookie() {\n        this.http.get(ROOT_URL + 'test/test_cookie', {params: {cookie: localStorage.getItem('anshi_cookie')}}).subscribe(res => {\n            console.log(res);\n        });\n    }\n\n\n}\n"],"sourceRoot":""}